syntax = "proto3";
package storage;

option go_package = "github.com/danmuck/dps_net/api/services/storage";

// for api.Contact
import "api/rpc.proto";



// ----------------------------------------------------------------
// RPCs
// ----------------------------------------------------------------
message STORE {
  api.Contact from = 1;
  bytes       key  = 2;
  bytes       value = 3;
}

message DELETE {
  	api.Contact from = 1;
    bytes       key  = 2;
}

message RETREIVE {
  	api.Contact from = 1;
  	bytes       key  = 2;
}

message FILE {
	api.Contact from = 1;
  	bytes value = 1;
  	bool  found = 2;
}

message ACK {
	api.Contact from = 1;
  	bool ok = 2;
    repeated FILE files = 3;
}


// ----------------------------------------------------------------
// local storage service
// ----------------------------------------------------------------
service LocalStorageService {
  rpc PutFile    (STORE)  	returns (ACK);
  rpc GetFile    (RETREIVE) returns (ACK);
  rpc DelFile    (DELETE)   returns (ACK);
}
